import React, { useEffect, useState, useCallback, useRef } from 'react';
import Image from 'next/image';
import Link from 'next/link';
import AnchorLink from 'react-anchor-link-smooth-scroll';
import cx from 'classnames';
import classes from './Header.module.scss';
import PhoneIcon from '../../../images/telephone-icon.png';
import { HamburgerMenu } from '../../common/HamburgerMenu';

export const Header: React.FC = () => {
  const [isActive, setIsActive] = useState(false);
  const [showMobileMenu, setShowMobileMenu] = useState(false);
  const bodyRef = useRef<HTMLElement>();
  const onClickHandler = () => {
    console.log(bodyRef.current);
    if (bodyRef.current) {
      bodyRef.current.classList.toggle('menu-visible');
    }
    setShowMobileMenu((showMenu) => !showMenu);
  };
  const onLinkClickHandler = () => {
    if (bodyRef.current) {
      bodyRef.current.classList.remove('menu-visible');
    }
    setShowMobileMenu(false);
  };

  const tweakHeader = useCallback(() => {
    if (window.scrollY >= 20 && !isActive) {
      setIsActive(true);
    } else if (window.scrollY < 20 && isActive) {
      setIsActive(false);
    }
  }, [isActive]);

  useEffect(() => {
    bodyRef.current = document.querySelector('body')!;
    tweakHeader();
    document.addEventListener('scroll', tweakHeader);

    return () => document.removeEventListener('scroll', tweakHeader);
  }, [tweakHeader]);

  return (
    <header
      className={cx(
        classes.header,
        { [classes.active]: isActive },
        'animate__animated',
        'animate__fadeIn'
      )}
    >
      <div className="container">
        <div className="row">
          <div className="col-md-12">
            <div className={classes.inner}>
              <div className={classes.logo__container}>
                <svg
                  className={classes.logo}
                  width="58"
                  height="58"
                  viewBox="0 0 58 58"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M28.9342 58C44.9142 58 57.8685 45.0163 57.8685 29C57.8685 12.9837 44.9142 0 28.9342 0C12.9543 0 0 12.9837 0 29C0 45.0163 12.9543 58 28.9342 58Z"
                    fill="#FFE9E9"
                  />
                  <path
                    d="M48.1157 35.8749C49.6873 35.1339 51.1429 34.1674 52.4365 33.0059C54.5738 31.1731 55.4688 29.3712 55.0907 27.6544C55.0666 27.5491 55.0173 27.4513 54.947 27.3694C54.8767 27.2875 54.7875 27.224 54.6872 27.1844C54.5869 27.1448 54.4785 27.1303 54.3714 27.1421C54.2642 27.1539 54.1615 27.1917 54.0723 27.2523C51.5617 28.9617 48.7575 30.1914 45.8009 30.8792L44.7439 31.1112C42.7609 31.5288 40.7085 31.9619 39.1885 33.4312C36.6248 32.1417 33.7752 31.5295 30.9094 31.6525C29.4916 31.6911 28.0784 31.8333 26.6812 32.0779C28.3083 30.7848 29.6507 29.1681 30.624 27.3296C30.9866 27.1672 31.3492 26.9816 31.7042 26.796C33.134 27.5305 34.7281 27.8846 36.3336 27.8245H36.4725C40.1705 27.7778 43.7882 26.738 46.9489 24.8133C50.1095 22.8887 52.6973 20.1498 54.4426 16.8819C54.5555 16.7028 54.6254 16.5 54.6468 16.2893C54.6682 16.0787 54.6406 15.8659 54.5661 15.6677C54.444 15.4526 54.2664 15.2744 54.0519 15.1519C53.8373 15.0295 53.5938 14.9672 53.347 14.9717H52.8995C53.56 14.4638 54.1111 13.8272 54.5198 13.1003C55.0943 11.8422 55.4367 10.4902 55.5305 9.10986C55.6926 7.56319 55.0213 7.04506 54.6046 6.87493C54.2763 6.75453 53.9211 6.72776 53.5784 6.79759C53.2184 6.8543 52.8557 6.9239 52.4905 7.00639V4.54719C52.5291 4.29678 52.4842 4.04061 52.3629 3.81833C52.2415 3.59605 52.0505 3.42006 51.8192 3.31759C51.6403 3.25859 51.4506 3.2401 51.2637 3.26346C50.172 3.38351 49.1259 3.76839 48.216 4.38479V3.54959C48.2231 3.36893 48.1887 3.18903 48.1157 3.02373C48.0102 2.83373 47.8589 2.67328 47.6756 2.55709C47.4923 2.44089 47.2828 2.37267 47.0663 2.35866C44.875 2.04933 42.1822 1.88693 40.1684 3.20159L39.8366 2.17306C39.728 1.72562 39.4759 1.32626 39.119 1.03626C38.6715 0.719194 37.8999 0.533594 36.7349 1.40746C32.3137 4.71733 29.5978 9.12533 29.3817 13.4947C29.3468 15.2621 29.5046 17.028 29.8524 18.7611C29.9527 19.3333 30.0453 19.9133 30.1301 20.4856C30.4465 22.8056 30.4696 24.6693 29.5515 26.5099C28.2948 28.9385 26.3659 30.9523 23.9961 32.3099C24.1495 31.5453 24.2398 30.7693 24.2661 29.9899V29.7656C24.5516 24.9013 24.6288 20.1917 22.4221 16.124C22.37 16.0255 22.2939 15.9419 22.2007 15.881C22.1076 15.8202 22.0006 15.784 21.8897 15.776C21.7783 15.7687 21.6669 15.7897 21.5657 15.837C21.4646 15.8843 21.3769 15.9564 21.311 16.0467C20.3745 17.5217 19.7933 19.195 19.6135 20.9341C19.095 23.3431 18.8363 25.8009 18.8419 28.2653C18.9114 30.2992 19.1814 32.9517 20.5163 34.0576C19.2076 34.6364 17.9393 35.303 16.7201 36.0528C14.0323 37.8315 11.8574 40.2861 10.4127 43.1712C8.96798 46.0563 8.30408 49.271 8.48734 52.4939C8.50083 52.6614 8.57642 52.8179 8.69923 52.9324C8.82204 53.0469 8.98317 53.1111 9.1509 53.1125H9.19719C9.37191 53.1006 9.53484 53.0199 9.65047 52.8881C9.7661 52.7563 9.82504 52.584 9.81445 52.4088C9.68466 50.1639 9.99814 47.9154 10.737 45.7921C11.4758 43.6689 12.6254 41.7126 14.1199 40.0355C14.7603 41.9147 18.3713 42.8117 19.5209 43.0437C20.2369 43.191 20.9658 43.2661 21.6968 43.268C23.5508 43.2817 25.3705 42.7668 26.9435 41.7832C27.0437 41.7212 27.1254 41.6332 27.18 41.5286C27.2346 41.424 27.2601 41.3066 27.2538 41.1887C27.2474 41.0708 27.2096 40.9568 27.1441 40.8587C27.0787 40.7605 26.9881 40.6819 26.8818 40.6309L23.4251 38.9373C21.9874 38.1389 20.4445 37.5479 18.8419 37.1819C18.4354 37.1279 18.0251 37.1072 17.6151 37.12C18.8337 36.3946 20.0935 35.7413 21.3881 35.1635C22.0903 34.8387 22.7847 34.4984 23.4791 34.1504C25.914 33.4963 28.4138 33.115 30.9326 33.0136C33.2536 32.9282 35.5653 33.3504 37.7071 34.2509C37.6165 34.3301 37.5314 34.4154 37.4524 34.5061C35.7699 36.3894 34.5809 38.6624 33.9923 41.1206C33.4037 43.5788 33.4341 46.145 34.0806 48.5885C34.4973 50.0965 35.2997 50.9936 36.3414 51.1173H36.5806C37.6685 51.1173 38.6098 50.2512 39.2425 48.6427C39.8484 47.1258 40.2957 45.5501 40.5773 43.9408L43.409 48.7973C43.7572 49.4259 44.1545 50.0258 44.5973 50.5915C44.7153 50.7566 44.8673 50.8945 45.043 50.9959C45.2187 51.0973 45.414 51.1598 45.6157 51.1792C45.8955 51.1688 46.1651 51.0715 46.3873 50.9008C47.1441 50.3769 47.7712 49.6864 48.2205 48.8822C48.6699 48.0779 48.9296 47.1812 48.9798 46.2608C49.992 46.4959 51.0271 46.6178 52.0662 46.6243C53.0737 46.6288 54.0775 46.5014 55.0522 46.2453C55.215 46.2015 55.3551 46.0971 55.444 45.9535C55.5328 45.8098 55.5638 45.6377 55.5305 45.472C55.0942 43.4164 54.2008 41.486 52.917 39.8244C51.6332 38.1628 49.9921 36.8128 48.1157 35.8749ZM36.3491 26.4944C35.2396 26.5192 34.1345 26.3464 33.0853 25.984C33.5019 25.7211 33.9109 25.4427 34.3044 25.1411C34.9955 25.2272 35.6912 25.2711 36.3877 25.2725C39.5697 25.274 42.6981 24.4508 45.4691 22.8829C47.3128 21.7997 49.0221 20.5018 50.5616 19.0163C51.4797 18.1579 52.3671 17.2531 53.2235 16.3251C51.5774 19.3796 49.143 21.9348 46.1745 23.7238C43.2061 25.5127 39.8127 26.4696 36.3491 26.4944ZM41.6961 8.05813C41.9788 7.53592 42.3377 7.05893 42.7609 6.64293C43.9568 5.36693 45.1528 4.19919 46.6188 3.90533C45.7342 5.183 45.0885 6.61106 44.713 8.11999C44.5741 8.57626 44.4275 9.04799 44.2578 9.53519C43.7479 11.219 42.9289 12.7927 41.8427 14.1752C42.0237 13.4765 42.1349 12.7615 42.1745 12.0408C42.2192 10.6965 42.0579 9.35334 41.6961 8.05813ZM41.2795 15.9925C41.4338 15.5904 41.5572 15.2192 41.673 14.8325C43.0295 13.3513 44.0251 11.5751 44.5818 9.64346C44.7516 9.15626 44.8982 8.67679 45.0448 8.22053C45.4134 6.74098 46.0489 5.34144 46.9197 4.09093L47.0586 9.72853C47.1616 10.8113 47.0542 11.9038 46.7423 12.9456C46.0787 14.6856 44.2963 15.7683 42.3597 16.8123C41.7424 17.0829 41.1329 17.3691 40.5387 17.6939C40.8088 17.1216 41.0557 16.5648 41.2795 15.9925ZM39.1576 20.0525C40.3281 19.2524 41.5737 18.5686 42.8766 18.0109H42.9229C45.8292 16.7665 48.9684 16.1626 52.1279 16.24C50.3147 17.1757 48.6095 18.1733 46.8271 19.2173C46.0555 19.6581 45.284 20.1067 44.5124 20.5475C41.673 22.1947 38.0851 24.0739 34.9988 24.6152C36.6032 23.3095 38.0048 21.7718 39.1576 20.0525ZM52.8069 16.24C52.0353 17.0907 51.1865 17.9181 50.3378 18.7069C48.8196 20.1909 47.1308 21.4889 45.3071 22.5736C42.256 24.2982 38.7732 25.1037 35.2766 24.8936C38.3629 24.2981 41.9122 22.4499 44.7439 20.8181C45.5154 20.3773 46.287 19.9288 47.0586 19.488C49.003 18.3435 50.8471 17.2608 52.8532 16.2555L52.8069 16.24ZM53.7636 8.05813C53.8737 8.04268 53.9853 8.04268 54.0954 8.05813C54.1571 8.05813 54.2729 8.33653 54.2111 8.92426C54.1365 10.1455 53.8411 11.343 53.3393 12.4584C52.6179 13.6047 51.5298 14.4717 50.2529 14.9176C49.057 14.9883 47.868 15.1486 46.696 15.3971C47.2616 14.8264 47.703 14.1444 47.9922 13.3941C48.3713 12.1906 48.5103 10.924 48.4011 9.66666V8.67679C49.6936 8.86017 51.0105 8.75722 52.259 8.37519C52.7451 8.28239 53.2467 8.16639 53.7636 8.08906V8.05813ZM48.3626 5.94693C49.1565 5.22143 50.1424 4.74081 51.202 4.56266L51.1557 7.26933C50.2313 7.52729 49.2563 7.54327 48.324 7.31573V6.00879L48.3626 5.94693ZM46.4568 3.61146C44.9136 3.95946 43.7254 5.15813 42.5217 6.41866C42.1655 6.77844 41.8451 7.17212 41.565 7.59413C41.3798 6.91359 41.1637 6.24079 40.9554 5.60666L40.6082 4.52399C42.1591 3.30986 44.4738 3.36399 46.4568 3.61146ZM30.7011 13.572C30.9249 9.58933 33.4557 5.54479 37.5373 2.46693C37.7553 2.27556 38.0227 2.14959 38.3089 2.10346C38.3365 2.09458 38.3662 2.09458 38.3938 2.10346C38.4976 2.23725 38.569 2.39347 38.6021 2.55973L39.7132 5.98559C40.457 7.88398 40.8543 9.90096 40.886 11.9403C40.7991 13.1597 40.5205 14.3577 40.0604 15.4899C38.4244 19.7563 35.3398 23.3078 31.3492 25.52C31.7297 23.8196 31.7612 22.0594 31.4418 20.3464C31.357 19.7509 31.2566 19.1632 31.1641 18.5755C30.8232 16.9303 30.6679 15.2519 30.7011 13.572ZM22.9467 29.7037V29.9357C22.9467 30.6472 22.8079 32.4645 22.2832 33.0755C22.207 33.1109 22.1368 33.1578 22.0749 33.2147C21.3033 32.3485 21.1335 31.0107 21.0949 29.6728C21.0409 27.4379 21.0949 25.172 21.2261 22.9371C21.2724 22.2101 21.3881 21.46 21.5193 20.6557C21.6776 19.7605 21.7832 18.8567 21.8357 17.9491C23.2862 21.46 23.1936 25.52 22.9467 29.7037ZM20.1768 28.2344C20.1862 25.8628 20.4448 23.4989 20.9483 21.1816C21.0747 20.4159 21.2395 19.6571 21.4422 18.908C21.3804 19.4725 21.2956 20.0448 21.203 20.6093C21.0872 21.3827 20.9561 22.156 20.9098 22.9293C20.7709 25.1797 20.7246 27.4533 20.7786 29.696C20.7157 30.9319 21.0191 32.1589 21.6505 33.2224C21.1104 33.0136 20.3388 32.1011 20.1768 28.2344ZM19.7601 41.76C17.7694 41.3424 15.5704 40.4144 15.3544 39.5869C15.3342 39.4822 15.3342 39.3746 15.3544 39.2699C18.006 40.7791 21.0008 41.5781 24.0501 41.5899H24.3124C22.8333 42.0289 21.2677 42.0875 19.7601 41.76ZM15.8559 39.2003H16.3652C17.2745 39.2161 18.1796 39.3275 19.0657 39.5328C19.9067 39.7571 20.7477 40.0432 21.5579 40.3061C22.5224 40.6232 23.51 40.948 24.513 41.2032C21.5027 41.3006 18.5191 40.6102 15.8559 39.2003ZM18.6027 38.4888C20.0841 38.8348 21.5099 39.3866 22.8387 40.1283L24.1813 40.8011C23.3248 40.5691 22.4838 40.2907 21.6659 40.0277C20.848 39.7648 19.9993 39.4709 19.1506 39.2544C18.2445 39.0416 17.3187 38.925 16.3883 38.9064C16.1183 38.9064 15.8559 38.9064 15.6167 38.8523C16.2473 38.5355 16.9494 38.3889 17.6537 38.4269C17.9712 38.4226 18.2885 38.4433 18.6027 38.4888ZM40.2764 35.8827L40.4384 35.9523C40.9579 36.1708 41.4884 36.3618 42.0279 36.5245C42.4947 36.6499 42.9729 36.7277 43.4553 36.7565C46.1534 38.1533 48.7614 39.7185 51.2637 41.4429C52.1476 41.9805 52.931 42.6688 53.5784 43.4768C53.8052 44.0117 53.9934 44.5621 54.1417 45.124L53.671 45.2013C50.1079 44.0096 46.7504 42.2722 43.7177 40.0509C42.5299 39.2291 41.4648 38.2423 40.5542 37.12C40.4513 36.6921 40.3587 36.2796 40.2764 35.8827ZM53.0383 42.4173C52.541 41.9599 52.0097 41.5411 51.4489 41.1645C49.1237 39.5629 46.7071 38.0988 44.2115 36.7797C44.9003 36.7636 45.5856 36.6755 46.2562 36.5168C49.1644 37.58 51.5792 39.6809 53.0383 42.4173ZM40.1375 34.3051C41.3875 33.1683 43.2239 32.7584 44.9831 32.4104L46.0633 32.1707C48.7888 31.5489 51.3949 30.4858 53.7791 29.0232C53.3667 30.2174 52.5993 31.2565 51.5801 32.0005C50.2927 33.163 48.8256 34.1085 47.2361 34.8C45.7052 35.4676 43.9995 35.6196 42.3751 35.2331C41.887 35.0889 41.4077 34.9158 40.94 34.7149C40.6776 34.6067 40.4076 34.4984 40.1684 34.3979C40.1616 34.3659 40.1512 34.3347 40.1375 34.3051ZM38.0157 48.1245C37.8537 48.5344 37.2441 49.8645 36.4725 49.764C35.8167 49.6944 35.4618 48.6504 35.3383 48.2173C34.7536 45.9898 34.7294 43.6518 35.2681 41.4126C35.8067 39.1735 36.8913 37.1034 38.4246 35.3877C38.5095 35.2949 38.5944 35.2253 38.6484 35.1712C38.9294 35.9401 39.1437 36.7318 39.2888 37.5376C39.3041 37.8615 39.3532 38.1829 39.4354 38.4965C39.7627 41.7741 39.2749 45.0819 38.0157 48.1245ZM45.6698 49.7795L45.6157 49.7176C45.2186 49.208 44.8625 48.6676 44.551 48.1013L40.8705 41.7987V41.7523C40.8743 41.6853 40.8743 41.6182 40.8705 41.5512C41.2489 42.1669 41.732 42.7113 42.298 43.1597C43.9438 44.3564 45.7661 45.2879 47.699 45.9205C47.6976 46.6803 47.5122 47.4284 47.1588 48.1006C46.8053 48.7727 46.2943 49.3489 45.6698 49.7795ZM41.943 40.7933C42.1976 41.0485 42.46 41.2883 42.7146 41.5667C43.3473 42.1157 43.9954 42.6416 44.6513 43.1133C44.1112 42.804 43.5711 42.456 43.0387 42.0771C42.6018 41.7162 42.231 41.2818 41.943 40.7933ZM46.3256 43.9795C45.1759 43.1133 44.0109 42.224 42.9461 41.2728C42.2912 40.7269 41.6963 40.1124 41.1714 39.44C40.986 39.0568 40.8337 38.6584 40.7162 38.2491L40.6468 37.7387C41.4915 38.7035 42.4442 39.5675 43.4862 40.3139C46.345 42.4147 49.4923 44.0896 52.83 45.2864C50.5852 45.3932 48.3486 44.9443 46.3179 43.9795H46.3256Z"
                    fill="url(#paint0_linear_42:147)"
                  />
                  <defs>
                    <linearGradient
                      id="paint0_linear_42:147"
                      x1="53.6016"
                      y1="15.776"
                      x2="14.9505"
                      y2="54.3317"
                      gradientUnits="userSpaceOnUse"
                    >
                      <stop stopColor="#9E6523" />
                      <stop offset="0.15" stopColor="#BB8E56" />
                      <stop offset="0.25" stopColor="#CCA775" />
                      <stop offset="0.48" stopColor="#BF8D47" />
                      <stop offset="1" stopColor="#9E6523" />
                    </linearGradient>
                  </defs>
                </svg>

                <span className={classes.label__group}>
                  <h1 className={classes.label}>Paradise</h1>
                  <p className={classes.description}>events planner</p>
                </span>
              </div>

              <Link href="tel:+18184046994">
                <a className={classes.phone}>
                  <Image
                    src={PhoneIcon}
                    width="20"
                    height="20"
                    alt="Telephone icon"
                  />
                  <span className={classes.phone__number}>+18184046994</span>
                </a>
              </Link>

              <nav className={classes.nav}>
                <AnchorLink offset="50" href="#about" className={classes.link}>
                  About us
                </AnchorLink>
                <AnchorLink
                  offset="50"
                  href="#packages"
                  className={classes.link}
                >
                  Picnic packages
                </AnchorLink>
                {/* <AnchorLink
                  offset="50"
                  href="#gallery"
                  className={classes.link}
                >
                  Gallery
                </AnchorLink> */}
                <AnchorLink
                  offset="50"
                  href="#contact"
                  className={classes.link}
                >
                  Contact us
                </AnchorLink>
                <AnchorLink offset="50" href="#faq" className={classes.link}>
                  FAQ
                </AnchorLink>
              </nav>

              <nav
                className={cx(classes.mobileMenu, {
                  [classes.visible]: showMobileMenu,
                })}
              >
                <div className={classes.mobileNav}>
                  <AnchorLink
                    offset="30"
                    href="#about"
                    className={classes.link}
                    onClick={onLinkClickHandler}
                  >
                    About us
                  </AnchorLink>
                  <AnchorLink
                    offset="30"
                    href="#packages"
                    className={classes.link}
                    onClick={onLinkClickHandler}
                  >
                    Picnic packages
                  </AnchorLink>
                  {/* <AnchorLink
                    offset="30"
                    href="#gallery"
                    className={classes.link}
                    onClick={onLinkClickHandler}
                  >
                    Gallery
                  </AnchorLink> */}
                  <AnchorLink
                    offset="30"
                    href="#contact"
                    className={classes.link}
                    onClick={onLinkClickHandler}
                  >
                    Contact us
                  </AnchorLink>
                  <AnchorLink
                    offset="30"
                    href="#faq"
                    className={classes.link}
                    onClick={onLinkClickHandler}
                  >
                    FAQ
                  </AnchorLink>
                </div>
                <Link href="tel:+18184046994">
                  <a className={classes.phoneMobile}>
                    <Image
                      src={PhoneIcon}
                      width="20"
                      height="20"
                      alt="Telephone icon"
                    />
                    <span className={classes.phone__number}>+18184046994</span>
                  </a>
                </Link>
              </nav>

              <HamburgerMenu
                onClick={onClickHandler}
                isOpen={showMobileMenu}
                className={classes.hamburger}
              />
            </div>
          </div>
        </div>
      </div>
    </header>
  );
};
